<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Style/style.css"> <!-- Link CSS correctly -->
    <title>hiloStart</title>
</head>
<body onload="userGreeting()" id="body">
    <script>
    //
    // FUNCTION      : userGreeting
    // DESCRIPTION   : 
    //   This function greets the user by prompting them to enter their name.
    //   It also hides the number input and submission elements until the name is validated.
    // PARAMETERS    : 
    //   None
    // RETURNS       : 
    //   N/A : nothing
    //
    function userGreeting() {
        document.getElementById("promptHeader").innerHTML = "Hi, please enter your name";
        document.getElementById("body").style.backgroundColor = "grey"; // Initial background color
        document.getElementById("submit").style.visibility = "hidden";
        document.getElementById("numberInput").style.visibility = "hidden";
    }

    //
    // FUNCTION      : validateName
    // DESCRIPTION   : 
    //   This function retrieves the name entered by the user, trims any leading or trailing whitespace,
    //   and checks if the name is empty. If it is empty, an error message is displayed.
    //   Otherwise, it proceeds to prompt the user for a number.
    // PARAMETERS    : 
    //   event: event onclick (not used in this implementation)
    // RETURNS       : 
    //   N/A : nothing
    //
    function validateName() {
        const name = document.getElementById("name").value.trim();
        const nameErrorElement = document.getElementById("nameError");

        if (name.length === 0) {
            clearInputs();
            nameErrorElement.innerHTML = "<p>Error: Name is empty</p>";
        } else {
            nameErrorElement.innerHTML = "";
            userPromptForNumber(name);
        }
    }

    //
    // FUNCTION      : userPromptForNumber
    // DESCRIPTION   : 
    //   This function prompts the user for a number greater than 1 by displaying a textbox and button.
    //   It also updates the UI to reflect the new prompt.
    // PARAMETERS    : 
    //   name (string): The name of the user for personalized greeting.
    // RETURNS       : 
    //   N/A : nothing
    //
    function userPromptForNumber(name) {
        document.getElementById("submitName").style.visibility = "hidden";
        document.getElementById("body").style.backgroundColor = "blue"; // Indicate new step
        document.getElementById("name").style.visibility = "hidden";

        document.getElementById("promptHeader").innerHTML = 
            "Hi " + name + ", please enter a max number over 1";

        clearInputs();
        document.getElementById("submit").style.visibility = "visible";
        document.getElementById("numberInput").style.visibility = "visible";
        document.getElementById("submit").value = "Generate random number";
    }

    //
    // FUNCTION      : numberChecker
    // DESCRIPTION   : 
    //   This function validates the number entered by the user. It checks if the input is a valid integer
    //   greater than 1 and displays appropriate error messages for invalid inputs.
    // PARAMETERS    : 
    //   name (string): The user's name (used for personalized messages, though not shown here).
    // RETURNS       : 
    //   boolean: Returns true if the input is valid, otherwise false.
    //
    function numberChecker(name) {
        const numberMsg = document.getElementById("numberMsg");
        const numberStr = document.getElementById("numberInput").value.trim();
        const number = Number(numberStr);
        let isGood = false;

        if (numberStr.length === 0) {
            numberMsg.innerHTML = "<p>Error: Please enter a number. You entered nothing.</p>";
            numberMsg.style.color = "red";
        } else if (isNaN(number)) {
            numberMsg.innerHTML = "<p>Error: You entered something that is not a number. Please enter a valid number.</p>";
            numberMsg.style.color = "red";
        } else if (!Number.isInteger(number)) {
            numberMsg.innerHTML = "<p>Error: You entered a non-integer. Please enter a whole number greater than 1.</p>";
            numberMsg.style.color = "red";
        } else if (number <= 1) {
            numberMsg.innerHTML = "<p>Error: Please enter a number greater than 1.</p>";
            numberMsg.style.color = "red";
        } else {
            clearInputs();
            isGood = true;
        }

        return isGood;
    }

    //
    // FUNCTION      : clearInputs
    // DESCRIPTION   : 
    //   This function clears all dynamic inputs and error messages from the input container.
    // PARAMETERS    : 
    //   None
    // RETURNS       : 
    //   N/A : nothing
    //
    function clearInputs() {
        const container = document.getElementById("inputContainer");
        container.innerHTML = "";
    }
    </script>

    <h2 id="promptHeader">Blank</h2>

    <!-- Form that collects the user's name -->
    <form action="asp.asp" method="POST" onsubmit="return numberChecker()" id="form">
        <input type="text" id="name" name="name" placeholder="Enter your name">
        <input type="button" value="Submit name" onclick="validateName()" id="submitName">
        <input type="text" id="numberInput" name="numberInput" placeholder="Enter a number" style="visibility: hidden;">
        <input type="submit" id="submit" value="Submit" style="visibility: hidden;">
    </form>

    <h2 id="numberMsg"></h2>
    <h2 id="nameError" style="color: red;"></h2>
    <div id="inputContainer"></div>
</body>
</html>
